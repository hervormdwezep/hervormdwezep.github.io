<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.19/index.global.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.19/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.19/locales/nl.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.19/google-calendar.global.min.js"></script>
    <style>
        #calendar {
            font-family: Verdana, Helvetica, Arial, sans-serif, "Lucida Grande";
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow-y: hidden;
        }
        body {
            height: 100vh;
        }
    </style>
</head>
<body>
    <div id="calendar"></div>
    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                height: 'parent',
                initialView: 'listMonth',
                locale: 'nl',
                googleCalendarApiKey: 'AIzaSyBDwlxQ-Ab7YMtk4VKqJPxSIZJ8Z9ISv38',
                validRange: function(nowDate) {
                    var start = new Date(nowDate.valueOf());
                    var end = new Date(nowDate.valueOf());
                    end.setFullYear(end.getFullYear() + 1);
                    return { start: start, end: end };
                },
                eventSources: [
                    {
                        googleCalendarId: '1e4cf9cab19d243241601382a1360e86bd5557a7265e1504f09894e663baaf66@group.calendar.google.com',
                    },
                    {
                        googleCalendarId: 'q9ipt257tvc5j73520rm83ggn4@group.calendar.google.com',
                    },
                    {
                        googleCalendarId: 'pj5ufq9abrrq9scp7hs6ohkln8@group.calendar.google.com',
                    },
                    {
                        googleCalendarId: '1dded5fb545c581b702bfc92e99b107042a03671c6b1fda102ee6b60f32594f8@group.calendar.google.com',
                        className: 'Dorpskerk'
                    },
                    {
                        googleCalendarId: 'hervormdwezep@gmail.com',
                    }
                ],
                eventClick: function(info) {
                    // info.event, info.jsEvent, info.view, info.el
                    let url = '';
                    let title = '';
                    let htmltxt = info.event.title || 'onbekend';

                    // Location
                    if (info.event.extendedProps.location) {
                        htmltxt += ' (' + info.event.extendedProps.location + ')';
                    }
                    // Classname
                    if (info.event.source && info.event.source.className && info.event.source.className.length > 0) {
                        htmltxt += ', ' + info.event.source.className;
                    }
                    // Description
                    if (info.event.extendedProps.description) {
                        if (info.event.extendedProps.description.startsWith('website:')) {
                            url = info.event.extendedProps.description.substring(8);
                        } else {
                            title = info.event.extendedProps.description;
                        }
                    }

                    if (url) {
                        window.open(url, '_blank');
                    }
                    info.jsEvent.preventDefault();
                },
                eventContent: function(arg) {
                    let event = arg.event;
                    let htmltxt = event.title || 'onbekend';
                    if (event.extendedProps.location) {
                        htmltxt += ' (' + event.extendedProps.location + ')';
                    }
                    if (event.source && event.source.className && event.source.className.length > 0) {
                        htmltxt += ', ' + event.source.className;
                    }
                    let url = '';
                    let title = '';
                    if (event.extendedProps.description) {
                        if (event.extendedProps.description.startsWith('website:')) {
                            url = event.extendedProps.description.substring(8);
                        } else {
                            title = event.extendedProps.description;
                        }
                    }
                    let cursor = url === '' ? 'default' : 'pointer';
                    let tekstdeco = url === '' ? 'text-decoration:none;' : '';
                    return {
                        html: `<a href="${url}" style="${tekstdeco}cursor:${cursor};" title="${title}">${htmltxt}</a>`
                    };
                }
            });
            calendar.render();
            // Jump to today
            calendar.gotoDate(new Date());
        });
    </script>
</body>
</html>
